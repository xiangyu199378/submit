Tuesday ,December 16 ,2021  work log

# List
1. 排查为什么无法注册中断，还有一次中断是不知道哪里在调用。
2. 排查为什么设置0x80地址，设置下去和读上来的之不一样。
3. 修改ECX代码，343和335都要兼容。

# To do
1. 地址设置值和读取值不一样。 去掉那几个值。
2. 亮度值设置 12 13 设置 0x01 0x3F ，读出来却是 0x00,0x0F。
- 设置范围 00 0110 0100 ～ 01 1111 0100  对应数值 1000cd/m^2 ~ 5000cd/m^2
- 设置 0x10 为 0x0F
## 问题
各位，我在配置ECX343E上电遇到如下问题，帮忙看下是否有问题：
1. <font color='red'> 配置0x01~0xfa寄存器，写下去和读出来不一样</font>
- 寄存器   0x07,0x81,0x97,0x9d，0x9f,0xa0
- 写下去值  0x20,0x00,0x20,0x00,0x00,0x00
- 读出来值  0x10,0x81,0x00,0x83,0x56,x0a9
2. <font color='red'> 配置亮度0x12，0x13寄存器，写下去和读出来不一样</font>
- 下去 0x01 0x3F ，读出来却是 0x00,0x0F。
### 答复：
- 81寄存器写00  回读81  这个是正常的
- 07 12 13 97 写多少，回复就是多少。 让我排查spi时序,电压是否正常，时钟是否过快，
- 9A ～A0 7个寄存器，因为读取的是otp的值，不同屏幕有差异的。  
- 屏幕只是支持 120HZ，YUV16bit，这个等龙迅那边回复。
## to do sovle question
1. 排查一遍0x01～0xfa寄存器，的值是否对。检查完成，没有问题。
2. 看一下袁翔总结的开屏过程。335和334手册上说明不一样。
3. 走查一遍执行代码。
4. 在看一遍数据手册。

### 做过：
1. 只是配置0x01～0xBF,没有效果。
2. 修改0xBF为0x00，没有效果。
3. 排查 SPI时钟为1M， 正常。spi mosi/miso 电压1.8v正常。spi读写时序，这个需要示波器，同时觉得不会有问题，没有作检查。
### 剩余可以
#kill -9 $(pidof 进程名关键字)
当前进度：
1. 等待龙迅答复，固件版本是否输出的是120HZ，YUV16bit格式数据。
2. sony答复，0x07,0x97和0x12，0x13 这几个值，它那边写多少，读就是多少。让做mosi,miso电压，spi时序，spi频率检测。当前做了电源1.8v,1M频率。spi时序有做。
3. 
